The U.S. Justice Department did North Carolina a favor when it warned the state that it was violating federal law by limiting the access of transgender people to restrooms in public schools and state buildings. But instead of moving to repeal its discriminatory “bathroom bill,” the state is doubling down by suing the Obama administration to prevent federal sanctions. A petition filed in federal court Monday by Gov. Pat McCrory accuses the Justice Department of “blatant overreach” and argues that “transgender status isn't a protected class” under civil rights laws.

North Carolina's House Bill 2 is an ugly and unnecessary enactment. It requires people in public schools and government buildings to use restrooms and changing facilities consistent with their “biological sex,” as listed on their birth certificates. The law is rooted in a distaste about transgender individuals and the urban legend that allowing people to use facilities of the gender they identify with will make it possible for males to disguise themselves as women in order to prey on females.

But the law isn't just pointless and cruel. It also puts North Carolina on a collision course with federal civil rights law and threatens federal funding of state programs. Shortly after McCrory went to court, the Justice Department filed its own suit alleging that the state was engaged in a “pattern or practice of sex discrimination.”

It's true that in prohibiting discrimination on the basis of “sex,” Congress didn't explicitly protect transgender people. But the Department of Justice plausibly construes “sex discrimination” to encompass discrimination on the basis of gender identity.

Far from constituting “overreach,” that interpretation represents a natural development. As the Supreme Court recognized in 1998, anti-discrimination laws “often go beyond the principal evil [they were designed to address] to cover reasonably comparable evils.” Discrimination against women and discrimination against gays and lesbians (and transgender people) all are rooted in stereotypes about “proper” expressions of gender and sexuality.

HB 2 is on shaky legal ground for another reason: It purports to preempt municipalities in the state from adopting their own ordinances to protect the civil rights of gay and transgender people — as the city of Charlotte did earlier this year. But in 1996 the Supreme Court struck down a similar ban on local anti-discrimination laws in a landmark case from Colorado.

North Carolina rightly has come in for criticism — and boycott threats — from all over the country because of this mean-spirited and unnecessary law. Now its governor is embarking on a risky legal battle that will further besmirch the state's image. It's not too late for the state to recognize that it made a mistake, and pull back.

Follow the Opinion section on Twitter @latimesopinion and Facebook